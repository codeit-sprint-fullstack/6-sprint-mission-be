# ğŸ¼ íŒë‹¤ë§ˆì¼“ í”„ë¡œì íŠ¸

> _ì´ ì €ì¥ì†ŒëŠ” íŒë‹¤ë§ˆì¼“ í”„ë¡œì íŠ¸ì˜ ë°±ì—”ë“œ ì½”ë“œë¥¼ ê´€ë¦¬í•˜ëŠ” ê³³ì…ë‹ˆë‹¤. í”„ë¡œì íŠ¸ë¥¼ í´ë¡ í•˜ì—¬ ê°œë°œ í™˜ê²½ì„ ì„¤ì •í•˜ê³ , ê° ë¸Œëœì¹˜ì—ì„œ í•´ë‹¹ ìŠ¤í”„ë¦°íŠ¸ ë¯¸ì…˜ì„ ìˆ˜í–‰í•´ ì£¼ì„¸ìš”!_ ğŸ› ï¸

## ì†Œê°œ

ì•ˆë…•í•˜ì„¸ìš”! íŒë‹¤ë§ˆì¼“ í”„ë¡œì íŠ¸ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤! ğŸ¥³  
íŒë‹¤ë§ˆì¼“ì€ ë”°ëœ»í•œ ì¤‘ê³ ê±°ë˜ë¥¼ ìœ„í•œ ì»¤ë®¤ë‹ˆí‹° í”Œë«í¼ì´ì—ìš”. ì—¬ëŸ¬ë¶„ì€ ì´ê³³ì—ì„œ ìƒí’ˆì„ ë“±ë¡í•˜ê³ , ë‹¤ë¥¸ ì‚¬ìš©ìë“¤ê³¼ ì†Œí†µí•˜ë©°, ììœ ë¡­ê²Œ ì´ì•¼ê¸°ë¥¼ ë‚˜ëˆŒ ìˆ˜ ìˆì–´ìš”. ë§¤ì£¼ ìŠ¤í”„ë¦°íŠ¸ ë¯¸ì…˜ì„ í†µí•´ ê¸°ëŠ¥ì„ í•˜ë‚˜ì”© ë§Œë“¤ì–´ ê°€ë©° ì„±ì¥í•´ ë‚˜ê°€ëŠ” ì—¬ì •ì„ í•¨ê»˜í•´ìš”. ğŸš€

![PandaMarket](https://github.com/user-attachments/assets/3784b99f-73c9-4349-a9a9-92b2a7563574)  
_ìœ„ ì´ë¯¸ì§€ëŠ” íŒë‹¤ë§ˆì¼“ì˜ ëŒ€í‘œ ì´ë¯¸ì§€ì…ë‹ˆë‹¤. í”„ë¡œì íŠ¸ê°€ ì§„í–‰ë¨ì— ë”°ë¼ ë” ë§ì€ ì´ë¯¸ì§€ë¥¼ ì¶”ê°€í•  ì˜ˆì •ì´ì—ìš”!_ ğŸ“¸

## ìŠ¤í”„ë¦°íŠ¸ ë¯¸ì…˜ì´ë€? ğŸ¤”

ìŠ¤í”„ë¦°íŠ¸ ë¯¸ì…˜ì€ **í•˜ë‚˜ì˜ ê°œì¸ í”„ë¡œì íŠ¸ë¥¼ ê¸¸ê²Œ ì§„í–‰í•˜ë©´ì„œ, ê·¸ ê³¼ì •ì—ì„œ ì£¼ê¸°ì ìœ¼ë¡œ í”¼ë“œë°±ì„ ë°›ì„ ìˆ˜ ìˆëŠ” ì‹œìŠ¤í…œ**ì´ì—ìš”. ê° ìŠ¤í”„ë¦°íŠ¸ë§ˆë‹¤ ë°°ìš´ ì´ë¡ ì„ ì ìš©í•´ ë³´ê³ , **ë©˜í† ë‹˜ê»˜ ì½”ë“œ ë¦¬ë·°ë¥¼ ë°›ì•„ê°€ë©° ì‹¤ë ¥ì„ ì‘¥ì‘¥ í‚¤ì›Œê°ˆ ìˆ˜ ìˆëŠ” ì¤‘ìš”í•œ ê°œì¸ ê³¼ì œ**ëë‹ˆë‹¤. ğŸ’ª

## ì£¼ìš” ê¸°ëŠ¥ âœ¨

1. **ìƒí’ˆ ë“±ë¡**: ë‚´ê°€ ê°€ì§„ ë¬¼ê±´ì„ ì˜¬ë¦¬ê³ , ì‚¬ì§„ê³¼ ì„¤ëª…ì„ ì¶”ê°€í•´ ì§ì ‘ íŒë§¤í•  ìˆ˜ ìˆì–´ìš”!
2. **ë¬¸ì˜ ëŒ“ê¸€**: ìƒí’ˆì— ëŒ€í•œ ê¶ê¸ˆí•œ ì ì´ë‚˜ ì˜ê²¬ì„ ììœ ë¡­ê²Œ ë‚¨ê¸¸ ìˆ˜ ìˆë‹µë‹ˆë‹¤. ğŸ“
3. **ììœ ê²Œì‹œíŒ**: ë‹¤ì–‘í•œ ì£¼ì œë¡œ ì¹œêµ¬ë“¤ê³¼ ì´ì•¼ê¸°ë¥¼ ë‚˜ëˆ„ê³ , ì •ë³´ë¥¼ ê³µìœ í•  ìˆ˜ ìˆëŠ” ê³µê°„ì´ì—ìš”! ğŸ—£ï¸

## í”„ë¡œì íŠ¸ ë¸Œëœì¹˜ êµ¬ì¡° ğŸ—ï¸

í”„ë¡œì íŠ¸ëŠ” ë‹¨ê³„ë³„ë¡œ ë‚˜ë‰˜ì–´ ìˆê³ , ê° ìŠ¤í”„ë¦°íŠ¸ ë¯¸ì…˜ì— ë§ëŠ” ë¸Œëœì¹˜ê°€ ìˆì–´ìš”. ê° ë¸Œëœì¹˜ë¥¼ í†µí•´ ì²´ê³„ì ìœ¼ë¡œ ê°œë°œí•˜ë©° í•™ìŠµí•  ìˆ˜ ìˆì–´ìš”. ğŸ¯

### ë¸Œëœì¹˜ ì„¤ëª…

1. **node (part1): ìŠ¤í”„ë¦°íŠ¸ ë¯¸ì…˜ 4ì˜ BE ìš”êµ¬ì‚¬í•­**

   - ë°±ì—”ë“œ ì„œë²„ ì„¤ì •ê³¼ ê°„ë‹¨í•œ API êµ¬í˜„ì„ ìœ„í•œ Express.js í”„ë¡œì íŠ¸ì˜ ì´ˆê¸° ì„¸íŒ…ì´ í¬í•¨ë¼ìš”.
   - **ìŠ¤í”„ë¦°íŠ¸ ë¯¸ì…˜ 4**ì˜ ë°±ì—”ë“œ ë‚´ìš©ì´ í¬í•¨ë¼ ìˆì–´ìš”.

2. **express (part2~4): ìŠ¤í”„ë¦°íŠ¸ ë¯¸ì…˜ 6 ~ 12ì˜ BE ìš”êµ¬ì‚¬í•­**
   - Express.jsë¥¼ ì´ìš©í•´ ë” ë³µì¡í•œ ë°±ì—”ë“œ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ëŠ” ë¯¸ì…˜ì…ë‹ˆë‹¤. ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™, ì¸ì¦ ë° ê¶Œí•œ ê´€ë¦¬ ë“± ê³ ê¸‰ API ì„¤ê³„ê°€ í¬í•¨ë©ë‹ˆë‹¤.
   - **ìŠ¤í”„ë¦°íŠ¸ ë¯¸ì…˜ 6ë¶€í„° 12ê¹Œì§€**ì˜ ë°±ì—”ë“œ ë‚´ìš©ì´ ë“¤ì–´ ìˆì–´ìš”.

> _ìŠ¤í”„ë¦°íŠ¸ ë¯¸ì…˜ ë‚´ í”„ë¡ íŠ¸ì—”ë“œ ìš”êµ¬ì‚¬í•­ì€ [í”„ë¡ íŠ¸ì—”ë“œ ë ˆí¬ì§€í† ë¦¬](https://github.com/codeit-sprint-fullstack/6-Sprint-mission-FE)ì˜ ë¸Œëœì¹˜ì—ì„œ ê´€ë¦¬í•´ì£¼ì„¸ìš”_

ë³¸ í”„ë¡œì íŠ¸ëŠ” [ì½”ë“œì‡](https://www.codeit.kr)ì˜ ì†Œìœ ì´ë©°, êµìœ¡ ëª©ì ìœ¼ë¡œë§Œ ì‚¬ìš©ë©ë‹ˆë‹¤. Â© 2024 Codeit. All rights reserved.

## ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹œìŠ¤í…œ

### Presigned URL ë°©ì‹ (í´ë¼ì´ì–¸íŠ¸ ì§ì ‘ ì—…ë¡œë“œ)

ì´ í”„ë¡œì íŠ¸ëŠ” **Presigned URL**ì„ ì´ìš©í•œ í´ë¼ì´ì–¸íŠ¸ ì§ì ‘ ì—…ë¡œë“œ ë°©ì‹ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

#### ì¥ì 

- ì„œë²„ ë¶€í•˜ ê°ì†Œ (ì´ë¯¸ì§€ íŒŒì¼ì´ ì„œë²„ë¥¼ ê±°ì¹˜ì§€ ì•ŠìŒ)
- ë¹ ë¥¸ ì—…ë¡œë“œ ì†ë„
- í™•ì¥ì„± í–¥ìƒ
- ë³´ì•ˆì„± í–¥ìƒ (ì„ì‹œ URL, 5ë¶„ ìœ íš¨)

#### ì—…ë¡œë“œ í”Œë¡œìš°

1. **Presigned URL ìš”ì²­**

   ```
   POST /articles/presigned-urls?access=public
   POST /products/presigned-urls?access=public
   POST /user/presigned-url?access=public
   ```

2. **í´ë¼ì´ì–¸íŠ¸ê°€ S3ì— ì§ì ‘ ì—…ë¡œë“œ**

   - ìƒì„±ëœ `uploadUrl`ë¡œ PUT ìš”ì²­
   - 5ë¶„ ë‚´ì— ì—…ë¡œë“œ ì™„ë£Œ í•„ìš”

3. **ì„œë²„ì— ë°ì´í„° ì €ì¥**
   - `fileUrl`ì„ í¬í•¨í•œ ë°ì´í„°ë¡œ ìƒì„±/ìˆ˜ì • API í˜¸ì¶œ

#### Public vs Private ì ‘ê·¼

- **Public**: ëˆ„êµ¬ë‚˜ ì ‘ê·¼ ê°€ëŠ¥í•œ ì´ë¯¸ì§€ (ìƒí’ˆ, í”„ë¡œí•„ ë“±)
- **Private**: ì¸ì¦ëœ ì‚¬ìš©ìë§Œ ì ‘ê·¼ ê°€ëŠ¥í•œ ì´ë¯¸ì§€ (ì„ì‹œ URLë¡œ 5ë¶„ê°„ ì ‘ê·¼)

#### ì‚¬ìš© ì˜ˆì‹œ

```javascript
// 1. Presigned URL ìƒì„±
const response = await fetch("/articles/presigned-urls?access=public", {
  method: "POST",
  headers: {
    Authorization: `Bearer ${token}`,
    "Content-Type": "application/json",
  },
  body: JSON.stringify([
    {
      filename: "image.jpg",
      contentType: "image/jpeg",
    },
  ]),
});
const [urlInfo] = await response.json();

// 2. S3ì— ì§ì ‘ ì—…ë¡œë“œ
await fetch(urlInfo.uploadUrl, {
  method: "PUT",
  headers: {
    "Content-Type": "image/jpeg",
  },
  body: imageFile,
});

// 3. ì„œë²„ì— ë°ì´í„° ì €ì¥
await fetch("/articles", {
  method: "POST",
  headers: {
    Authorization: `Bearer ${token}`,
    "Content-Type": "application/json",
  },
  body: JSON.stringify({
    title: "ì œëª©",
    content: "ë‚´ìš©",
    images: [urlInfo.fileUrl],
  }),
});
```

### ì—”ë“œí¬ì¸íŠ¸

#### ê²Œì‹œê¸€ (Articles)

- `POST /articles/presigned-urls` - ì´ë¯¸ì§€ ì—…ë¡œë“œìš© Presigned URL ìƒì„±
- `POST /articles` - ê²Œì‹œê¸€ ìƒì„±
- `PATCH /articles/:id` - ê²Œì‹œê¸€ ìˆ˜ì •

#### ìƒí’ˆ (Products)

- `POST /products/presigned-urls` - ì´ë¯¸ì§€ ì—…ë¡œë“œìš© Presigned URL ìƒì„±
- `POST /products` - ìƒí’ˆ ìƒì„±
- `PATCH /products/:id` - ìƒí’ˆ ìˆ˜ì •

#### ì‚¬ìš©ì (Users)

- `POST /user/presigned-url` - í”„ë¡œí•„ ì´ë¯¸ì§€ ì—…ë¡œë“œìš© Presigned URL ìƒì„±
- `PATCH /user/me` - ì‚¬ìš©ì ì •ë³´ ìˆ˜ì •

### í™˜ê²½ ë³€ìˆ˜

```
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_BUCKET_NAME=your_s3_bucket_name
```

## ì„¤ì¹˜ ë° ì‹¤í–‰

```bash
npm install
npm run dev
```

## API ë¬¸ì„œ

Swagger UIë¥¼ í†µí•´ API ë¬¸ì„œë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

- ê°œë°œ í™˜ê²½: http://localhost:7777/api-docs
